# Maintainer: mattf <matheusfillipeag@gmail.com>

pkgname=libcurl-impersonate-bin
pkgver=1.0.0rc2
pkgrel=2
pkgdesc="Series of patches that make curl requests look like Chrome"
arch=(aarch64 armv7h i686 x86_64)
url=https://github.com/lexiforest/curl-impersonate
depends=(glibc)
license=(MIT)
provides=(${pkgname%-bin}-chrome)
conflicts=(${pkgname%-bin}-chrome)
options=(!debug)
source=(https://raw.githubusercontent.com/lexiforest/curl-impersonate/master/LICENSE)
source_aarch64=($url/releases/download/v$pkgver/${pkgname%-bin}-v$pkgver.aarch64-linux-gnu.tar.gz)
source_armv7h=($url/releases/download/v$pkgver/${pkgname%-bin}-v$pkgver.arm-linux-gnueabihf.tar.gz)
source_i686=($url/releases/download/v$pkgver/${pkgname%-bin}-v$pkgver.i386-linux-gnu.tar.gz)
source_x86_64=($url/releases/download/v$pkgver/${pkgname%-bin}-v$pkgver.x86_64-linux-gnu.tar.gz)
sha512sums=('fcba99cba275aa35c971e9c45cdd41120b0c9a4e14c4f96ef0e2262ac21b016c749f46be5ffa7e17ce29bf75d039ad15eb5be989bbadb5bd2afb678e42165014')
sha512sums_aarch64=('c8add80e7a0430a074edea1a11f73d03044c48e848e164af2d6f362866623e29bede207a50f18f95b1bc5ab3d33f5c31408be60a6da66b74a0d176eebe299116')
sha512sums_armv7h=('d0403ca4ad55a8d499b120e5675c7b5a0dc4946af49c933e91fc24455ffe5e122aa21ee95554612ff5d1bd6faea1556e1e1b9c821918e2644cc9bcbddc05747a')
sha512sums_i686=('01bce0e862b83615c7b3dc2940e3d53c50f9623b4966fc003b138920adae213d313442fb7ffe2cd544534c2e7ec19187883f6c75e627bff1cf84092a59ddc0f3')
sha512sums_x86_64=('35cafda2b96df3218a6d8545e0947a899837ede51c90f7ef2980bd2d99dbd67199bc620000df28b186727300b8c7046d506807fb48ee0fbc068dc8ae01986339')
b2sums=('f9218feece0320ad19cde8d03c6f93292e3ff4261e2efe1dfbf32de03174344853bf6a4fecb4bbf1bd8e96bd4e0df0972b744b4187b869c7cc7448c26981fdde')
b2sums_aarch64=('0391a36546171581fdc2fd680a5d4d57b759f95496e9df42f3194c11e7869c134b69eed8a20c7b2c422b3b6759735607649030aabab555e9a3323bc5db01b413')
b2sums_armv7h=('4db5e2569dc6be0664aeb93f210ce0aba3163fcdba22dbb6e35769017ac5e08ae33da69b112dba1f6c7a11d8256667abd40d227fcfeadee99158b1ea0fd4591e')
b2sums_i686=('5aee089c08668d7f09e147a1775b321641f2e8c3d06237922d6f0f0ecb35cab8771d2995cab01673a062a631ac5d0eb70f2a1ea08f69b3e744b8c486edf82401')
b2sums_x86_64=('e7d350202ecf95d7cf86acedc2f18e3aaf7401fa0df1bc7a60ba5f9b412aa4afc3e50c363aa75f69ac4ece0e8180545099f07a8bf0ffb18f168cc5d7a60f70e2')

package () {
  install -vDm 755 ${pkgname%-bin}.so.4.8.0 -t "$pkgdir"/usr/lib/
  ln -s /usr/lib/${pkgname%-bin}.so.4.8.0      "$pkgdir"/usr/lib/${pkgname%-bin}-chrome.so
  ln -s /usr/lib/${pkgname%-bin}.so.4.8.0      "$pkgdir"/usr/lib/${pkgname%-bin}-chrome.so.4
  install -vDm 644 LICENSE                  -t "$pkgdir"/usr/share/licenses/$pkgname/
}
